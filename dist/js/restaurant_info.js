let restaurant;var newMap;document.addEventListener("DOMContentLoaded",e=>{initMap()}),initMap=(()=>{fetchRestaurantFromURL((e,t)=>{e?console.error(e):(self.newMap=L.map("map",{center:[t.latlng.lat,t.latlng.lng],zoom:16,scrollWheelZoom:!1}),L.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.jpg70?access_token={mapboxToken}",{mapboxToken:"pk.eyJ1IjoiZGluZGVyYSIsImEiOiJjamtsazl5NWIxd2E3M3Btemp4Njh6eGtrIn0.azq835pUPzRoLuJUX-7b1A",maxZoom:18,attribution:'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',id:"mapbox.streets"}).addTo(newMap),fillBreadcrumb(),DBHelper.mapMarkerForRestaurant(self.restaurant,self.newMap))})}),fetchRestaurantFromURL=(e=>{if(self.restaurant)return void e(null,self.restaurant);const t=getParameterByName("id");t?DBHelper.fetchRestaurantById(t,(t,n)=>{self.restaurant=n,n?(fillRestaurantHTML(),e(null,n)):console.error(t)}):(error="No restaurant id in URL",e(error,null))}),fillRestaurantHTML=((e=self.restaurant)=>{document.getElementById("restaurant-name").innerHTML=e.name,document.getElementById("restaurant-address").innerHTML=e.address;const t=document.getElementById("restaurant-img");t.className="restaurant-img",t.src=DBHelper.imageUrlForRestaurant(e),t.srcset=DBHelper.imageSrcsetForRestaurant(e),t.sizes="(max-width: 350px) 300px, (max-width: 650px) 600px, (min-width: 651px) 800px",t.alt=" ",document.getElementById("restaurant-cuisine").innerHTML=e.cuisine_type,e.operating_hours&&fillRestaurantHoursHTML(),fillReviewsHTML()}),fillRestaurantHoursHTML=((e=self.restaurant.operating_hours)=>{const t=document.getElementById("restaurant-hours");for(let n in e){const a=document.createElement("tr"),r=document.createElement("td");r.innerHTML=n,a.appendChild(r);const s=document.createElement("td");s.innerHTML=e[n],a.appendChild(s),t.appendChild(a)}}),fillReviewsHTML=((e=self.restaurant.reviews)=>{const t=document.getElementById("reviews-container"),n=document.createElement("h2");if(n.innerHTML="Reviews",t.appendChild(n),!e){const e=document.createElement("p");return e.innerHTML="No reviews yet!",void t.appendChild(e)}const a=document.getElementById("reviews-list");e.forEach(e=>{a.appendChild(createReviewHTML(e))}),t.appendChild(a)}),createReviewHTML=(e=>{const t=document.createElement("li"),n=document.createElement("p");n.innerHTML=e.name,n.className="review-name",t.appendChild(n);const a=document.createElement("p");a.className="date",a.innerHTML=e.date,t.appendChild(a);const r=document.createElement("div");r.append(n),r.append(a),r.className="review-info",t.appendChild(r);const s=document.createElement("p");s.innerHTML=`Rating: ${e.rating}`,s.className="ratings",t.appendChild(s);const o=document.createElement("p");return o.innerHTML=e.comments,o.className="comments",t.appendChild(o),t}),fillBreadcrumb=((e=self.restaurant)=>{const t=document.getElementById("breadcrumb"),n=document.createElement("li");n.innerHTML=e.name,t.appendChild(n)}),getParameterByName=((e,t)=>{t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");const n=new RegExp(`[?&]${e}(=([^&#]*)|&|#|$)`).exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlc3RhdXJhbnRfaW5mby5qcyJdLCJuYW1lcyI6WyJyZXN0YXVyYW50IiwibmV3TWFwIiwiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJpbml0TWFwIiwiZXJyb3IiLCJmZXRjaFJlc3RhdXJhbnRGcm9tVVJMIiwiY29uc29sZSIsImNlbnRlciIsImxhdGxuZyIsImxhdCIsImxuZyIsInNlbGYiLCJzY3JvbGxXaGVlbFpvb20iLCJtYXBib3hUb2tlbiIsInRpbGVMYXllciIsImlkIiwiYWRkVG8iLCJmaWxsQnJlYWRjcnVtYiIsIkRCSGVscGVyIiwibWFwTWFya2VyRm9yUmVzdGF1cmFudCIsImNhbGxiYWNrIiwiZ2V0UGFyYW1ldGVyQnlOYW1lIiwiZmV0Y2hSZXN0YXVyYW50QnlJZCIsImZpbGxSZXN0YXVyYW50SFRNTCIsImdldEVsZW1lbnRCeUlkIiwiaW5uZXJIVE1MIiwibmFtZSIsImFkZHJlc3MiLCJpbWFnZSIsImltYWdlVXJsRm9yUmVzdGF1cmFudCIsImNsYXNzTmFtZSIsImN1aXNpbmVfdHlwZSIsIm9wZXJhdGluZ19ob3VycyIsImZpbGxSZXZpZXdzSFRNTCIsIm9wZXJhdGluZ0hvdXJzIiwiaG91cnMiLCJrZXkiLCJyb3ciLCJjcmVhdGVFbGVtZW50IiwiZGF5IiwiZmlsbFJlc3RhdXJhbnRIb3Vyc0hUTUwiLCJ0aW1lIiwiYXBwZW5kQ2hpbGQiLCJyZXZpZXdzIiwiY29udGFpbmVyIiwidGl0bGUiLCJub1Jldmlld3MiLCJ1bCIsInJldmlldyIsImNyZWF0ZVJldmlld0hUTUwiLCJsaSIsImRhdGUiLCJhcHBlbmQiLCJkaXYiLCJyYXRpbmciLCJjb21tZW50cyIsImJyZWFkY3J1bWIiLCJ1cmwiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhyZWYiLCJyZXBsYWNlIiwicmVzdWx0cyIsIlJlZ0V4cCIsImV4ZWMiLCJyZWdleCJdLCJtYXBwaW5ncyI6IkFBQUEsSUFBSUEsV0FDSixJQUFJQyxPQUlKQyxTQUFTQyxpQkFB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STBCLE9BQUN0QixHQUNMb0IsRUFBR1IsT0FBQUEsR0FFSFcsRUFBQXZCLFVBQWE5QixjQUNibUQsRUFBQUEsWUFBQUUsR0FFQUgsTUFBR1IsRUFBWVMsU0FBZmIsY0FBQSxLQUVBZ0IsRUFBTUQscUJBQWVmLEVBQWNnQixTQUNuQ0QsRUFBSUQsVUFBSixVQUNBQyxFQUFHWCxZQUFIWSxHQUVBSixNQUFHUixFQUFZVyxTQUFmZixjQUFBLEtBT0EsT0FMQWlCLEVBQU1ELFVBQVN0RCxFQUFTc0MsU0FDeEJnQixFQUFPN0IsVUFBYSxXQUNwQjZCLEVBQUFBLFlBQU94QixHQUdEeUIsSUFRUnRDLGVBQUEsRUFBQW5CLEVBQUFhLEtBQUFiLGNBSUUsTUFBTTBELEVBQWF4RCxTQUFTd0IsZUFBZSxjQUNyQzBCLEVBQUtsRCxTQUFTc0MsY0FBYyxNQUNsQ1ksRUFBR3pCLFVBQVkzQixFQUFXNEIsS0FDMUI4QixFQUFXZCxZQUFZUSxLQUN4QjdCLG1CQUxELEVBQUFLLEVBQUErQixLQU9BQSxJQUtJQSxFQUFNQyxPQUFPQyxTQUFTQyxNQUN4QmxDLEVBQU9BLEVBQUttQyxRQUFRLFVBQVcsUUFDL0IsTUFDRUMsRUFEWSxJQUFJQyxjQUFjckMsc0JBQ2RzQyxLQUFLUCxHQUx6QnBDLE9BQUFBLEVBR015QyxFQUFRRCxHQUVWQyxtQkFBVUEsRUFEWixHQUFBRCxRQUFBLE1BQUEsTUFBTUksR0FITiIsImZpbGUiOiJyZXN0YXVyYW50X2luZm8uanMiLCJzb3VyY2VzQ29udGVudCI6WyJsZXQgcmVzdGF1cmFudDtcclxudmFyIG5ld01hcDtcclxuLyoqXHJcbiAqIEluaXRpYWxpemUgbWFwIGFzIHNvb24gYXMgdGhlIHBhZ2UgaXMgbG9hZGVkLlxyXG4gKi9cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIChldmVudCkgPT4geyAgXHJcbiAgaW5pdE1hcCgpO1xyXG59KTtcclxuXHJcbi8qKlxyXG4gKiBJbml0aWFsaXplIGxlYWZsZXQgbWFwXHJcbiAqL1xyXG5pbml0TWFwID0gKCkgPT4ge1xyXG4gIGZldGNoUmVzdGF1cmFudEZyb21VUkwoKGVycm9yLCByZXN0YXVyYW50KSA9PiB7XHJcbiAgICBpZiAoZXJyb3IpIHsgLy8gR290IGFuIGVycm9yIVxyXG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgIH0gZWxzZSB7ICAgICAgXHJcbiAgICAgIHNlbGYubmV3TWFwID0gTC5tYXAoJ21hcCcsIHtcclxuICAgICAgICBjZW50ZXI6IFtyZXN0YXVyYW50LmxhdGxuZy5sYXQsIHJlc3RhdXJhbnQubGF0bG5nLmxuZ10sXHJcbiAgICAgICAgem9vbTogMTYsXHJcbiAgICAgICAgc2Nyb2xsV2hlZWxab29tOiBmYWxzZVxyXG4gICAgICB9KTtcclxuICAgICAgTC50aWxlTGF5ZXIoJ2h0dHBzOi8vYXBpLnRpbGVzLm1hcGJveC5jb20vdjQve2lkfS97en0ve3h9L3t5fS5qcGc3MD9hY2Nlc3NfdG9rZW49e21hcGJveFRva2VufScsIHtcclxuICAgICAgICBtYXBib3hUb2tlbjogJ3BrLmV5SjFJam9pWkdsdVpHVnlZU0lzSW1FaU9pSmphbXRzYXpsNU5XSXhkMkUzTTNCdGVtcDROamg2ZUd0ckluMC5henE4MzVwVVB6Um9MdUpVWC03YjFBJyxcclxuICAgICAgICBtYXhab29tOiAxOCxcclxuICAgICAgICBhdHRyaWJ1dGlvbjogJ01hcCBkYXRhICZjb3B5OyA8YSBocmVmPVwiaHR0cHM6Ly93d3cub3BlbnN0cmVldG1hcC5vcmcvXCI+T3BlblN0cmVldE1hcDwvYT4gY29udHJpYnV0b3JzLCAnICtcclxuICAgICAgICAgICc8YSBocmVmPVwiaHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LXNhLzIuMC9cIj5DQy1CWS1TQTwvYT4sICcgK1xyXG4gICAgICAgICAgJ0ltYWdlcnkgwqkgPGEgaHJlZj1cImh0dHBzOi8vd3d3Lm1hcGJveC5jb20vXCI+TWFwYm94PC9hPicsXHJcbiAgICAgICAgaWQ6ICdtYXBib3guc3RyZWV0cycgICAgXHJcbiAgICAgIH0pLmFkZFRvKG5ld01hcCk7XHJcbiAgICAgIGZpbGxCcmVhZGNydW1iKCk7XHJcbiAgICAgIERCSGVscGVyLm1hcE1hcmtlckZvclJlc3RhdXJhbnQoc2VsZi5yZXN0YXVyYW50LCBzZWxmLm5ld01hcCk7XHJcbiAgICB9XHJcbiAgfSk7XHJcbn0gIFxyXG4gXHJcbi8qIHdpbmRvdy5pbml0TWFwID0gKCkgPT4ge1xyXG4gIGZldGNoUmVzdGF1cmFudEZyb21VUkwoKGVycm9yLCByZXN0YXVyYW50KSA9PiB7XHJcbiAgICBpZiAoZXJyb3IpIHsgLy8gR290IGFuIGVycm9yIVxyXG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHNlbGYubWFwID0gbmV3IGdvb2dsZS5tYXBzLk1hcChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFwJyksIHtcclxuICAgICAgICB6b29tOiAxNixcclxuICAgICAgICBjZW50ZXI6IHJlc3RhdXJhbnQubGF0bG5nLFxyXG4gICAgICAgIHNjcm9sbHdoZWVsOiBmYWxzZVxyXG4gICAgICB9KTtcclxuICAgICAgZmlsbEJyZWFkY3J1bWIoKTtcclxuICAgICAgREJIZWxwZXIubWFwTWFya2VyRm9yUmVzdGF1cmFudChzZWxmLnJlc3RhdXJhbnQsIHNlbGYubWFwKTtcclxuICAgIH1cclxuICB9KTtcclxufSAqL1xyXG5cclxuLyoqXHJcbiAqIEdldCBjdXJyZW50IHJlc3RhdXJhbnQgZnJvbSBwYWdlIFVSTC5cclxuICovXHJcbmZldGNoUmVzdGF1cmFudEZyb21VUkwgPSAoY2FsbGJhY2spID0+IHtcclxuICBpZiAoc2VsZi5yZXN0YXVyYW50KSB7IC8vIHJlc3RhdXJhbnQgYWxyZWFkeSBmZXRjaGVkIVxyXG4gICAgY2FsbGJhY2sobnVsbCwgc2VsZi5yZXN0YXVyYW50KVxyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuICBjb25zdCBpZCA9IGdldFBhcmFtZXRlckJ5TmFtZSgnaWQnKTtcclxuICBpZiAoIWlkKSB7IC8vIG5vIGlkIGZvdW5kIGluIFVSTFxyXG4gICAgZXJyb3IgPSAnTm8gcmVzdGF1cmFudCBpZCBpbiBVUkwnXHJcbiAgICBjYWxsYmFjayhlcnJvciwgbnVsbCk7XHJcbiAgfSBlbHNlIHtcclxuICAgIERCSGVscGVyLmZldGNoUmVzdGF1cmFudEJ5SWQoaWQsIChlcnJvciwgcmVzdGF1cmFudCkgPT4ge1xyXG4gICAgICBzZWxmLnJlc3RhdXJhbnQgPSByZXN0YXVyYW50O1xyXG4gICAgICBpZiAoIXJlc3RhdXJhbnQpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgZmlsbFJlc3RhdXJhbnRIVE1MKCk7XHJcbiAgICAgIGNhbGxiYWNrKG51bGwsIHJlc3RhdXJhbnQpXHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGUgcmVzdGF1cmFudCBIVE1MIGFuZCBhZGQgaXQgdG8gdGhlIHdlYnBhZ2VcclxuICovXHJcbmZpbGxSZXN0YXVyYW50SFRNTCA9IChyZXN0YXVyYW50ID0gc2VsZi5yZXN0YXVyYW50KSA9PiB7XHJcbiAgY29uc3QgbmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN0YXVyYW50LW5hbWUnKTtcclxuICBuYW1lLmlubmVySFRNTCA9IHJlc3RhdXJhbnQubmFtZTtcclxuXHJcbiAgY29uc3QgYWRkcmVzcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN0YXVyYW50LWFkZHJlc3MnKTtcclxuICBhZGRyZXNzLmlubmVySFRNTCA9IHJlc3RhdXJhbnQuYWRkcmVzcztcclxuXHJcbiAgY29uc3QgaW1hZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudC1pbWcnKTtcclxuICBpbWFnZS5jbGFzc05hbWUgPSAncmVzdGF1cmFudC1pbWcnXHJcbiAgaW1hZ2Uuc3JjID0gREJIZWxwZXIuaW1hZ2VVcmxGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQpO1xyXG4gIGltYWdlLnNyY3NldCA9IERCSGVscGVyLmltYWdlU3Jjc2V0Rm9yUmVzdGF1cmFudChyZXN0YXVyYW50KTtcclxuICBpbWFnZS5zaXplcyA9IFwiKG1heC13aWR0aDogMzUwcHgpIDMwMHB4LCAobWF4LXdpZHRoOiA2NTBweCkgNjAwcHgsIChtaW4td2lkdGg6IDY1MXB4KSA4MDBweFwiO1xyXG4gIGltYWdlLmFsdCA9IFwiIFwiO1xyXG4gIGNvbnN0IGN1aXNpbmUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudC1jdWlzaW5lJyk7XHJcbiAgY3Vpc2luZS5pbm5lckhUTUwgPSByZXN0YXVyYW50LmN1aXNpbmVfdHlwZTtcclxuXHJcbiAgLy8gZmlsbCBvcGVyYXRpbmcgaG91cnNcclxuICBpZiAocmVzdGF1cmFudC5vcGVyYXRpbmdfaG91cnMpIHtcclxuICAgIGZpbGxSZXN0YXVyYW50SG91cnNIVE1MKCk7XHJcbiAgfVxyXG4gIC8vIGZpbGwgcmV2aWV3c1xyXG4gIGZpbGxSZXZpZXdzSFRNTCgpO1xyXG59XHJcblxyXG4vKipcclxuICogQ3JlYXRlIHJlc3RhdXJhbnQgb3BlcmF0aW5nIGhvdXJzIEhUTUwgdGFibGUgYW5kIGFkZCBpdCB0byB0aGUgd2VicGFnZS5cclxuICovXHJcbmZpbGxSZXN0YXVyYW50SG91cnNIVE1MID0gKG9wZXJhdGluZ0hvdXJzID0gc2VsZi5yZXN0YXVyYW50Lm9wZXJhdGluZ19ob3VycykgPT4ge1xyXG4gIGNvbnN0IGhvdXJzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3RhdXJhbnQtaG91cnMnKTtcclxuICBmb3IgKGxldCBrZXkgaW4gb3BlcmF0aW5nSG91cnMpIHtcclxuICAgIGNvbnN0IHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XHJcblxyXG4gICAgY29uc3QgZGF5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTtcclxuICAgIGRheS5pbm5lckhUTUwgPSBrZXk7XHJcbiAgICByb3cuYXBwZW5kQ2hpbGQoZGF5KTtcclxuXHJcbiAgICBjb25zdCB0aW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTtcclxuICAgIHRpbWUuaW5uZXJIVE1MID0gb3BlcmF0aW5nSG91cnNba2V5XTtcclxuICAgIHJvdy5hcHBlbmRDaGlsZCh0aW1lKTtcclxuICAgIGhvdXJzLmFwcGVuZENoaWxkKHJvdyk7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogQ3JlYXRlIGFsbCByZXZpZXdzIEhUTUwgYW5kIGFkZCB0aGVtIHRvIHRoZSB3ZWJwYWdlLlxyXG4gKi9cclxuZmlsbFJldmlld3NIVE1MID0gKHJldmlld3MgPSBzZWxmLnJlc3RhdXJhbnQucmV2aWV3cykgPT4ge1xyXG4gIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXZpZXdzLWNvbnRhaW5lcicpO1xyXG4gIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDInKTtcclxuICB0aXRsZS5pbm5lckhUTUwgPSAnUmV2aWV3cyc7XHJcbiAgY29udGFpbmVyLmFwcGVuZENoaWxkKHRpdGxlKTtcclxuXHJcbiAgaWYgKCFyZXZpZXdzKSB7XHJcbiAgICBjb25zdCBub1Jldmlld3MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XHJcbiAgICBub1Jldmlld3MuaW5uZXJIVE1MID0gJ05vIHJldmlld3MgeWV0ISc7XHJcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQobm9SZXZpZXdzKTtcclxuICAgIHJldHVybjtcclxuICB9XHJcbiAgY29uc3QgdWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmV2aWV3cy1saXN0Jyk7XHJcbiAgcmV2aWV3cy5mb3JFYWNoKHJldmlldyA9PiB7XHJcbiAgICB1bC5hcHBlbmRDaGlsZChjcmVhdGVSZXZpZXdIVE1MKHJldmlldykpO1xyXG4gIH0pO1xyXG4gIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh1bCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGUgcmV2aWV3IEhUTUwgYW5kIGFkZCBpdCB0byB0aGUgd2VicGFnZS5cclxuICovXHJcbmNyZWF0ZVJldmlld0hUTUwgPSAocmV2aWV3KSA9PiB7XHJcbiAgY29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xyXG4gIGNvbnN0IG5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XHJcbiAgbmFtZS5pbm5lckhUTUwgPSByZXZpZXcubmFtZTtcclxuICBuYW1lLmNsYXNzTmFtZSA9ICdyZXZpZXctbmFtZSc7XHJcbiAgbGkuYXBwZW5kQ2hpbGQobmFtZSk7XHJcblxyXG4gIGNvbnN0IGRhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XHJcbiAgZGF0ZS5jbGFzc05hbWUgPSAnZGF0ZSc7XHJcbiAgZGF0ZS5pbm5lckhUTUwgPSByZXZpZXcuZGF0ZTtcclxuICBsaS5hcHBlbmRDaGlsZChkYXRlKTtcclxuXHJcbiAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgZGl2LmFwcGVuZChuYW1lKTtcclxuICBkaXYuYXBwZW5kKGRhdGUpO1xyXG4gIGRpdi5jbGFzc05hbWUgPSAncmV2aWV3LWluZm8nO1xyXG4gIGxpLmFwcGVuZENoaWxkKGRpdik7XHJcblxyXG4gIGNvbnN0IHJhdGluZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcclxuICByYXRpbmcuaW5uZXJIVE1MID0gYFJhdGluZzogJHtyZXZpZXcucmF0aW5nfWA7XHJcbiAgcmF0aW5nLmNsYXNzTmFtZSA9ICdyYXRpbmdzJ1xyXG4gIGxpLmFwcGVuZENoaWxkKHJhdGluZyk7XHJcblxyXG4gIGNvbnN0IGNvbW1lbnRzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xyXG4gIGNvbW1lbnRzLmlubmVySFRNTCA9IHJldmlldy5jb21tZW50cztcclxuICBjb21tZW50cy5jbGFzc05hbWUgPSAnY29tbWVudHMnXHJcbiAgbGkuYXBwZW5kQ2hpbGQoY29tbWVudHMpO1xyXG5cclxuICByZXR1cm4gbGk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBZGQgcmVzdGF1cmFudCBuYW1lIHRvIHRoZSBicmVhZGNydW1iIG5hdmlnYXRpb24gbWVudVxyXG4gKi9cclxuZmlsbEJyZWFkY3J1bWIgPSAocmVzdGF1cmFudD1zZWxmLnJlc3RhdXJhbnQpID0+IHtcclxuICBjb25zdCBicmVhZGNydW1iID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JyZWFkY3J1bWInKTtcclxuICBjb25zdCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XHJcbiAgbGkuaW5uZXJIVE1MID0gcmVzdGF1cmFudC5uYW1lO1xyXG4gIGJyZWFkY3J1bWIuYXBwZW5kQ2hpbGQobGkpO1xyXG59XHJcblxyXG4vKipcclxuICogR2V0IGEgcGFyYW1ldGVyIGJ5IG5hbWUgZnJvbSBwYWdlIFVSTC5cclxuICovXHJcbmdldFBhcmFtZXRlckJ5TmFtZSA9IChuYW1lLCB1cmwpID0+IHtcclxuICBpZiAoIXVybClcclxuICAgIHVybCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xyXG4gIG5hbWUgPSBuYW1lLnJlcGxhY2UoL1tcXFtcXF1dL2csICdcXFxcJCYnKTtcclxuICBjb25zdCByZWdleCA9IG5ldyBSZWdFeHAoYFs/Jl0ke25hbWV9KD0oW14mI10qKXwmfCN8JClgKSxcclxuICAgIHJlc3VsdHMgPSByZWdleC5leGVjKHVybCk7XHJcbiAgaWYgKCFyZXN1bHRzKVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgaWYgKCFyZXN1bHRzWzJdKVxyXG4gICAgcmV0dXJuICcnO1xyXG4gIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQocmVzdWx0c1syXS5yZXBsYWNlKC9cXCsvZywgJyAnKSk7XHJcbn1cclxuIl19
