let restaurants,neighborhoods,cuisines;var newMap,markers=[];document.addEventListener("DOMContentLoaded",e=>{initMap(),fetchNeighborhoods(),fetchCuisines()}),fetchNeighborhoods=(()=>{DBHelper.fetchNeighborhoods((e,t)=>{e?console.error(e):(self.neighborhoods=t,fillNeighborhoodsHTML())})}),fillNeighborhoodsHTML=((e=self.neighborhoods)=>{const t=document.getElementById("neighborhoods-select");e.forEach(e=>{const a=document.createElement("option");a.innerHTML=e,a.value=e,t.append(a)})}),fetchCuisines=(()=>{DBHelper.fetchCuisines((e,t)=>{e?console.error(e):(self.cuisines=t,fillCuisinesHTML())})}),fillCuisinesHTML=((e=self.cuisines)=>{const t=document.getElementById("cuisines-select");e.forEach(e=>{const a=document.createElement("option");a.innerHTML=e,a.value=e,t.append(a)})}),initMap=(()=>{self.newMap=L.map("map",{center:[40.722216,-73.987501],zoom:12,scrollWheelZoom:!1}),L.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.jpg70?access_token={mapboxToken}",{mapboxToken:"pk.eyJ1IjoiZGluZGVyYSIsImEiOiJjamtsazl5NWIxd2E3M3Btemp4Njh6eGtrIn0.azq835pUPzRoLuJUX-7b1A",maxZoom:18,attribution:'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',id:"mapbox.streets"}).addTo(newMap),updateRestaurants()}),updateRestaurants=(()=>{const e=document.getElementById("cuisines-select"),t=document.getElementById("neighborhoods-select"),a=e.selectedIndex,n=t.selectedIndex,s=e[a].value,r=t[n].value;DBHelper.fetchRestaurantByCuisineAndNeighborhood(s,r,(e,t)=>{e?console.error(e):(resetRestaurants(t),fillRestaurantsHTML())})}),resetRestaurants=(e=>{self.restaurants=[],document.getElementById("restaurants-list").innerHTML="",self.markers&&self.markers.forEach(e=>e.remove()),self.markers=[],self.restaurants=e}),fillRestaurantsHTML=((e=self.restaurants)=>{const t=document.getElementById("restaurants-list");e.forEach(e=>{t.append(createRestaurantHTML(e))}),addMarkersToMap()}),createRestaurantHTML=(e=>{const t=document.createElement("li"),a=document.createElement("img");a.className="restaurant-img",a.src=DBHelper.imageUrlForRestaurant(e),a.srcset=DBHelper.imageSrcsetForIndex(e),a.sizes="300px",a.alt=`photograph of ${e.name} restaurant`;const n=document.createElement("div");n.classList.add("head_name"),t.append(n),n.append(a);const s=document.createElement("div");s.className="restaurant-info",t.tabIndex="0",t.append(s);const r=document.createElement("h2");r.innerHTML=e.name,s.append(r);const o=document.createElement("div");o.classList.add("fav_list"),n.append(o);const c=document.createElement("input");c.className="is_favorite",c.setAttribute("role","checkbox"),c.type="checkbox",c.name="favorite";const i=document.createElement("label");i.className="checkbox-label","true"==e.is_favorite?(console.log(e.is_favorite),c.checked=!0,c.setAttribute("aria-checked","true"),c.innerHTML=`Remove ${e.name} as a favorite`,c.title=`Remove ${e.name} as a favorite`):(console.log(e.is_favorite),c.checked=!1,c.setAttribute("aria-checked","false"),c.innerHTML=`Add ${e.name} as a favorite`,c.title=`Add ${e.name} as a favorite`),console.log("Checked : ",c.checked),c.addEventListener("click",()=>(console.log("Checked Click : ",c.checked),c.checked?(c.setAttribute("aria-checked","true"),c.innerHTML=`Remove ${e.name} as a favorite`,c.title=`Remove ${e.name} as a favorite`,DBHelper.saveFavorite(e.id,"true")):(c.setAttribute("aria-checked","false"),c.innerHTML=`Add ${e.name} as a favorite`,c.title=`Add ${e.name} as a favorite`,DBHelper.saveFavorite(e.id,"false")))),o.append(c),o.append(i),n.append(o);const l=document.createElement("p");l.innerHTML=e.neighborhood,s.append(l);const d=document.createElement("p");d.innerHTML=e.address,s.append(d);const m=document.createElement("a");return m.innerHTML="View Details",m.href=DBHelper.urlForRestaurant(e),s.append(m),t}),addMarkersToMap=((e=self.restaurants)=>{e.forEach(e=>{const t=DBHelper.mapMarkerForRestaurant(e,self.newMap);t.on("click",function(){window.location.href=t.options.url}),self.markers.push(t)})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsicmVzdGF1cmFudHMiLCJuZWlnaGJvcmhvb2RzIiwiY3Vpc2luZXMiLCJuZXdNYXAiLCJtYXJrZXJzIiwiaW5pdE1hcCIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsImZldGNoTmVpZ2hib3Job29kcyIsImZldGNoQ3Vpc2luZXMiLCJEQkhlbHBlciIsImVycm9yIiwiY29uc29sZSIsInNlbGYiLCJmaWxsTmVpZ2hib3Job29kc0hUTUwiLCJzZWxlY3QiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwibmVpZ2hib3Job29kIiwib3B0aW9uIiwiaW5uZXJIVE1MIiwiZmlsbEN1aXNpbmVzSFRNTCIsImZvckVhY2giLCJjdWlzaW5lIiwiY3JlYXRlRWxlbWVudCIsIkwiLCJtYXAiLCJjZW50ZXIiLCJ6b29tIiwic2Nyb2xsV2hlZWxab29tIiwibWFwYm94VG9rZW4iLCJtYXhab29tIiwiaWQiLCJ1cGRhdGVSZXN0YXVyYW50cyIsImNTZWxlY3QiLCJuU2VsZWN0Iiwic2VsZWN0ZWRJbmRleCIsImNJbmRleCIsIm5JbmRleCIsInZhbHVlIiwiZmlsbFJlc3RhdXJhbnRzSFRNTCIsInJlc2V0UmVzdGF1cmFudHMiLCJtYXJrZXIiLCJyZW1vdmUiLCJ1bCIsInJlc3RhdXJhbnQiLCJhcHBlbmQiLCJjcmVhdGVSZXN0YXVyYW50SFRNTCIsImFkZE1hcmtlcnNUb01hcCIsImxpIiwiaW1hZ2UiLCJjbGFzc05hbWUiLCJuYW1lIiwiaGVhZE5hbWUiLCJkaXZJbmZvIiwidGFiSW5kZXgiLCJmYXZfZGl2IiwiY2xhc3NMaXN0IiwiZmF2b3JpdGUiLCJhZGQiLCJzZXRBdHRyaWJ1dGUiLCJsYWJlbCIsImlzX2Zhdm9yaXRlIiwibG9nIiwidGl0bGUiLCJjaGVja2VkIiwic2F2ZUZhdm9yaXRlIiwiYWRkcmVzcyIsIm1vcmUiLCJocmVmIiwidXJsRm9yUmVzdGF1cmFudCIsIm1hcE1hcmtlckZvclJlc3RhdXJhbnQiLCJvbiIs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QixFQUFRUixPQUFPcUIsR0FFZlgsRUFBTVksT0FBT3BELEdBQ2JvRCxFQUFLaEQsT0FBTG9DLEdBRUFGLE1BQUFBLEVBQUF0QyxTQUFBUSxjQUFBLEtBRUFOLEVBQUFFLFVBQUF5QixFQUFBM0IsYUE5RkZvQyxFQUFBUixPQUFBNUIsR0FxRkUsTUFBTWlELEVBQVVuRCxTQUFTUSxjQUFjLEtBQ3ZDMkMsRUFBUS9DLFVBQVl5QixFQUFXc0IsUUFDL0JiLEVBQVFSLE9BQU9xQixHQWNqQm5CLE1BQUFBLEVBQWVoQyxTQUFJaEIsY0FBbUJBLEtBUHBDLE9BUUFBLEVBQUFBLFVBQVlzQixlQUNWOEMsRUFBQUMsS0FBQTNELFNBQUE0RCxpQkFBQXpCLEdBQ0FTLEVBQU1aLE9BQU0wQixHQVZQbkIsSUFrQlJELGdCQVhELEVBQUFoRCxFQUFBYSxLQUFBYixlQVlBQSxFQUFBc0IsUUFBQXVCLElBVEksTUFBTUgsRUFBU2hDLFNBQVM2RCx1QkFBdUIxQixFQUFZaEMsS0FBS1YsUUFDaEV1QyxFQUFPOEIsR0FBRyxRQUNWLFdBQ0VDLE9BQU9DLFNBQVNMLEtBQU8zQixFQUFPaUMsUUFBUUMsTUFFeEMvRCxLQUFLVCxRQUFReUUsS0FBS25DIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJsZXQgcmVzdGF1cmFudHMsXHJcbiAgbmVpZ2hib3Job29kcyxcclxuICBjdWlzaW5lc1xyXG52YXIgbmV3TWFwXHJcbnZhciBtYXJrZXJzID0gW11cclxuLyoqXHJcbiAqIEZldGNoIG5laWdoYm9yaG9vZHMgYW5kIGN1aXNpbmVzIGFzIHNvb24gYXMgdGhlIHBhZ2UgaXMgbG9hZGVkLlxyXG4gKi9cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIChldmVudCkgPT4ge1xyXG4gIGluaXRNYXAoKTsgLy8gYWRkZWQgXHJcbiAgZmV0Y2hOZWlnaGJvcmhvb2RzKCk7XHJcbiAgZmV0Y2hDdWlzaW5lcygpO1xyXG59KTtcclxuXHJcbi8qKlxyXG4gKiBGZXRjaCBhbGwgbmVpZ2hib3Job29kcyBhbmQgc2V0IHRoZWlyIEhUTUwuXHJcbiAqL1xyXG5mZXRjaE5laWdoYm9yaG9vZHMgPSAoKSA9PiB7XHJcbiAgREJIZWxwZXIuZmV0Y2hOZWlnaGJvcmhvb2RzKChlcnJvciwgbmVpZ2hib3Job29kcykgPT4ge1xyXG4gICAgaWYgKGVycm9yKSB7IC8vIEdvdCBhbiBlcnJvclxyXG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHNlbGYubmVpZ2hib3Job29kcyA9IG5laWdoYm9yaG9vZHM7XHJcbiAgICAgIGZpbGxOZWlnaGJvcmhvb2RzSFRNTCgpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG59XHJcblxyXG4vKipcclxuICogU2V0IG5laWdoYm9yaG9vZHMgSFRNTC5cclxuICovXHJcbmZpbGxOZWlnaGJvcmhvb2RzSFRNTCA9IChuZWlnaGJvcmhvb2RzID0gc2VsZi5uZWlnaGJvcmhvb2RzKSA9PiB7XHJcbiAgY29uc3Qgc2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25laWdoYm9yaG9vZHMtc2VsZWN0Jyk7XHJcbiAgbmVpZ2hib3Job29kcy5mb3JFYWNoKG5laWdoYm9yaG9vZCA9PiB7XHJcbiAgICBjb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcclxuICAgIG9wdGlvbi5pbm5lckhUTUwgPSBuZWlnaGJvcmhvb2Q7XHJcbiAgICBvcHRpb24udmFsdWUgPSBuZWlnaGJvcmhvb2Q7XHJcbiAgICBzZWxlY3QuYXBwZW5kKG9wdGlvbik7XHJcbiAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBGZXRjaCBhbGwgY3Vpc2luZXMgYW5kIHNldCB0aGVpciBIVE1MLlxyXG4gKi9cclxuZmV0Y2hDdWlzaW5lcyA9ICgpID0+IHtcclxuICBEQkhlbHBlci5mZXRjaEN1aXNpbmVzKChlcnJvciwgY3Vpc2luZXMpID0+IHtcclxuICAgIGlmIChlcnJvcikgeyAvLyBHb3QgYW4gZXJyb3IhXHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgc2VsZi5jdWlzaW5lcyA9IGN1aXNpbmVzO1xyXG4gICAgICBmaWxsQ3Vpc2luZXNIVE1MKCk7XHJcbiAgICB9XHJcbiAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTZXQgY3Vpc2luZXMgSFRNTC5cclxuICovXHJcbmZpbGxDdWlzaW5lc0hUTUwgPSAoY3Vpc2luZXMgPSBzZWxmLmN1aXNpbmVzKSA9PiB7XHJcbiAgY29uc3Qgc2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1aXNpbmVzLXNlbGVjdCcpO1xyXG5cclxuICBjdWlzaW5lcy5mb3JFYWNoKGN1aXNpbmUgPT4ge1xyXG4gICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XHJcbiAgICBvcHRpb24uaW5uZXJIVE1MID0gY3Vpc2luZTtcclxuICAgIG9wdGlvbi52YWx1ZSA9IGN1aXNpbmU7XHJcbiAgICBzZWxlY3QuYXBwZW5kKG9wdGlvbik7XHJcbiAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBJbml0aWFsaXplIGxlYWZsZXQgbWFwLCBjYWxsZWQgZnJvbSBIVE1MLlxyXG4gKi9cclxuaW5pdE1hcCA9ICgpID0+IHtcclxuICBzZWxmLm5ld01hcCA9IEwubWFwKCdtYXAnLCB7XHJcbiAgICAgICAgY2VudGVyOiBbNDAuNzIyMjE2LCAtNzMuOTg3NTAxXSxcclxuICAgICAgICB6b29tOiAxMixcclxuICAgICAgICBzY3JvbGxXaGVlbFpvb206IGZhbHNlXHJcbiAgICAgIH0pO1xyXG4gIEwudGlsZUxheWVyKCdodHRwczovL2FwaS50aWxlcy5tYXBib3guY29tL3Y0L3tpZH0ve3p9L3t4fS97eX0uanBnNzA/YWNjZXNzX3Rva2VuPXttYXBib3hUb2tlbn0nLCB7XHJcbiAgICBtYXBib3hUb2tlbjogJ3BrLmV5SjFJam9pWkdsdVpHVnlZU0lzSW1FaU9pSmphbXRzYXpsNU5XSXhkMkUzTTNCdGVtcDROamg2ZUd0ckluMC5henE4MzVwVVB6Um9MdUpVWC03YjFBJyxcclxuICAgIG1heFpvb206IDE4LFxyXG4gICAgYXR0cmlidXRpb246ICdNYXAgZGF0YSAmY29weTsgPGEgaHJlZj1cImh0dHBzOi8vd3d3Lm9wZW5zdHJlZXRtYXAub3JnL1wiPk9wZW5TdHJlZXRNYXA8L2E+IGNvbnRyaWJ1dG9ycywgJyArXHJcbiAgICAgICc8YSBocmVmPVwiaHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LXNhLzIuMC9cIj5DQy1CWS1TQTwvYT4sICcgK1xyXG4gICAgICAnSW1hZ2VyeSDCqSA8YSBocmVmPVwiaHR0cHM6Ly93d3cubWFwYm94LmNvbS9cIj5NYXBib3g8L2E+JyxcclxuICAgIGlkOiAnbWFwYm94LnN0cmVldHMnXHJcbiAgfSkuYWRkVG8obmV3TWFwKTtcclxuXHJcbiAgdXBkYXRlUmVzdGF1cmFudHMoKTtcclxufVxyXG4vKiB3aW5kb3cuaW5pdE1hcCA9ICgpID0+IHtcclxuICBsZXQgbG9jID0ge1xyXG4gICAgbGF0OiA0MC43MjIyMTYsXHJcbiAgICBsbmc6IC03My45ODc1MDFcclxuICB9O1xyXG4gIHNlbGYubWFwID0gbmV3IGdvb2dsZS5tYXBzLk1hcChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFwJyksIHtcclxuICAgIHpvb206IDEyLFxyXG4gICAgY2VudGVyOiBsb2MsXHJcbiAgICBzY3JvbGx3aGVlbDogZmFsc2VcclxuICB9KTtcclxuICB1cGRhdGVSZXN0YXVyYW50cygpO1xyXG59ICovXHJcblxyXG4vKipcclxuICogVXBkYXRlIHBhZ2UgYW5kIG1hcCBmb3IgY3VycmVudCByZXN0YXVyYW50cy5cclxuICovXHJcbnVwZGF0ZVJlc3RhdXJhbnRzID0gKCkgPT4ge1xyXG4gIGNvbnN0IGNTZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3Vpc2luZXMtc2VsZWN0Jyk7XHJcbiAgY29uc3QgblNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZWlnaGJvcmhvb2RzLXNlbGVjdCcpO1xyXG5cclxuICBjb25zdCBjSW5kZXggPSBjU2VsZWN0LnNlbGVjdGVkSW5kZXg7XHJcbiAgY29uc3QgbkluZGV4ID0gblNlbGVjdC5zZWxlY3RlZEluZGV4O1xyXG5cclxuICBjb25zdCBjdWlzaW5lID0gY1NlbGVjdFtjSW5kZXhdLnZhbHVlO1xyXG4gIGNvbnN0IG5laWdoYm9yaG9vZCA9IG5TZWxlY3RbbkluZGV4XS52YWx1ZTtcclxuXHJcbiAgREJIZWxwZXIuZmV0Y2hSZXN0YXVyYW50QnlDdWlzaW5lQW5kTmVpZ2hib3Job29kKGN1aXNpbmUsIG5laWdoYm9yaG9vZCwgKGVycm9yLCByZXN0YXVyYW50cykgPT4ge1xyXG4gICAgaWYgKGVycm9yKSB7IC8vIEdvdCBhbiBlcnJvciFcclxuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXNldFJlc3RhdXJhbnRzKHJlc3RhdXJhbnRzKTtcclxuICAgICAgZmlsbFJlc3RhdXJhbnRzSFRNTCgpO1xyXG4gICAgfVxyXG4gIH0pXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDbGVhciBjdXJyZW50IHJlc3RhdXJhbnRzLCB0aGVpciBIVE1MIGFuZCByZW1vdmUgdGhlaXIgbWFwIG1hcmtlcnMuXHJcbiAqL1xyXG5yZXNldFJlc3RhdXJhbnRzID0gKHJlc3RhdXJhbnRzKSA9PiB7XHJcbiAgLy8gUmVtb3ZlIGFsbCByZXN0YXVyYW50c1xyXG4gIHNlbGYucmVzdGF1cmFudHMgPSBbXTtcclxuICBjb25zdCB1bCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN0YXVyYW50cy1saXN0Jyk7XHJcbiAgdWwuaW5uZXJIVE1MID0gJyc7XHJcblxyXG4gIC8vIFJlbW92ZSBhbGwgbWFwIG1hcmtlcnNcclxuICBpZiAoc2VsZi5tYXJrZXJzKSB7XHJcbiAgICBzZWxmLm1hcmtlcnMuZm9yRWFjaChtYXJrZXIgPT4gbWFya2VyLnJlbW92ZSgpKTtcclxuICB9XHJcbiAgc2VsZi5tYXJrZXJzID0gW107XHJcbiAgc2VsZi5yZXN0YXVyYW50cyA9IHJlc3RhdXJhbnRzO1xyXG59XHJcblxyXG4vKipcclxuICogQ3JlYXRlIGFsbCByZXN0YXVyYW50cyBIVE1MIGFuZCBhZGQgdGhlbSB0byB0aGUgd2VicGFnZS5cclxuICovXHJcbmZpbGxSZXN0YXVyYW50c0hUTUwgPSAocmVzdGF1cmFudHMgPSBzZWxmLnJlc3RhdXJhbnRzKSA9PiB7XHJcbiAgY29uc3QgdWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudHMtbGlzdCcpO1xyXG4gIHJlc3RhdXJhbnRzLmZvckVhY2gocmVzdGF1cmFudCA9PiB7XHJcbiAgICB1bC5hcHBlbmQoY3JlYXRlUmVzdGF1cmFudEhUTUwocmVzdGF1cmFudCkpO1xyXG4gIH0pO1xyXG4gIGFkZE1hcmtlcnNUb01hcCgpO1xyXG59XHJcblxyXG4vKipcclxuICogQ3JlYXRlIHJlc3RhdXJhbnQgSFRNTC5cclxuICovXHJcbmNyZWF0ZVJlc3RhdXJhbnRIVE1MID0gKHJlc3RhdXJhbnQpID0+IHtcclxuICBjb25zdCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XHJcblxyXG4gIGNvbnN0IGltYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XHJcbiAgaW1hZ2UuY2xhc3NOYW1lID0gJ3Jlc3RhdXJhbnQtaW1nJztcclxuICBpbWFnZS5zcmMgPSBEQkhlbHBlci5pbWFnZVVybEZvclJlc3RhdXJhbnQocmVzdGF1cmFudCk7XHJcbiAgaW1hZ2Uuc3Jjc2V0ID0gREJIZWxwZXIuaW1hZ2VTcmNzZXRGb3JJbmRleChyZXN0YXVyYW50KTtcclxuICBpbWFnZS5zaXplcyA9IFwiMzAwcHhcIjtcclxuICBpbWFnZS5hbHQgPSBgcGhvdG9ncmFwaCBvZiAke3Jlc3RhdXJhbnQubmFtZX0gcmVzdGF1cmFudGA7XHJcbiAgLy8gbGkuYXBwZW5kKGltYWdlKTtcclxuXHJcbiAgXHJcbiAgXHJcbiAgY29uc3QgaGVhZE5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICBoZWFkTmFtZS5jbGFzc0xpc3QuYWRkKCdoZWFkX25hbWUnKTtcclxuICAvLyBkaXZJbmZvLmFwcGVuZChoZWFkTmFtZSk7XHJcbiAgbGkuYXBwZW5kKGhlYWROYW1lKTtcclxuICBoZWFkTmFtZS5hcHBlbmQoaW1hZ2UpO1xyXG5cclxuXHJcbiAgY29uc3QgZGl2SW5mbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gIGRpdkluZm8uY2xhc3NOYW1lID0gJ3Jlc3RhdXJhbnQtaW5mbyc7XHJcbiAgbGkudGFiSW5kZXggPSBcIjBcIjtcclxuICBsaS5hcHBlbmQoZGl2SW5mbyk7XHJcbiAgXHJcbiAgY29uc3QgbmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gyJyk7XHJcbiAgbmFtZS5pbm5lckhUTUwgPSByZXN0YXVyYW50Lm5hbWU7XHJcbiAgZGl2SW5mby5hcHBlbmQobmFtZSk7XHJcblxyXG4gIGNvbnN0IGZhdl9kaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICBmYXZfZGl2LmNsYXNzTGlzdC5hZGQoJ2Zhdl9saXN0Jyk7XHJcbiAgaGVhZE5hbWUuYXBwZW5kKGZhdl9kaXYpO1xyXG5cclxuICBjb25zdCBmYXZvcml0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XHJcbiAgZmF2b3JpdGUuY2xhc3NOYW1lID0gXCJpc19mYXZvcml0ZVwiO1xyXG4gIGZhdm9yaXRlLnNldEF0dHJpYnV0ZSgncm9sZScsICdjaGVja2JveCcpO1xyXG4gIC8vIGZhdm9yaXRlLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbGxlZGJ5JywgJ1Jlc3RhdXJhbnQgRmF2b3JpdGUnKTtcclxuICBmYXZvcml0ZS50eXBlID0gXCJjaGVja2JveFwiO1xyXG4gIGZhdm9yaXRlLm5hbWUgPSBcImZhdm9yaXRlXCI7XHJcbiAgY29uc3QgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xyXG4gIC8vIGxhYmVsLnNldEF0dHJpYnV0ZSgnZm9yJywgJ2lzX2Zhdm9yaXRlJyk7XHJcbiAgbGFiZWwuY2xhc3NOYW1lID0gXCJjaGVja2JveC1sYWJlbFwiO1xyXG5cclxuICBpZihyZXN0YXVyYW50LmlzX2Zhdm9yaXRlID09ICd0cnVlJyApe1xyXG4gICAgY29uc29sZS5sb2cocmVzdGF1cmFudC5pc19mYXZvcml0ZSlcclxuICAgIGZhdm9yaXRlLmNoZWNrZWQgPSB0cnVlO1xyXG4gICAgZmF2b3JpdGUuc2V0QXR0cmlidXRlKCdhcmlhLWNoZWNrZWQnLCAndHJ1ZScpO1xyXG4gICAgZmF2b3JpdGUuaW5uZXJIVE1MID0gYFJlbW92ZSAke3Jlc3RhdXJhbnQubmFtZX0gYXMgYSBmYXZvcml0ZWA7XHJcbiAgICBmYXZvcml0ZS50aXRsZSA9IGBSZW1vdmUgJHtyZXN0YXVyYW50Lm5hbWV9IGFzIGEgZmF2b3JpdGVgO1xyXG4gIH0gZWxzZXtcclxuICAgIGNvbnNvbGUubG9nKHJlc3RhdXJhbnQuaXNfZmF2b3JpdGUpXHJcbiAgICBmYXZvcml0ZS5jaGVja2VkID0gZmFsc2U7XHJcbiAgICBmYXZvcml0ZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtY2hlY2tlZCcsICdmYWxzZScpO1xyXG4gICAgZmF2b3JpdGUuaW5uZXJIVE1MID0gYEFkZCAke3Jlc3RhdXJhbnQubmFtZX0gYXMgYSBmYXZvcml0ZWA7XHJcbiAgICBmYXZvcml0ZS50aXRsZSA9IGBBZGQgJHtyZXN0YXVyYW50Lm5hbWV9IGFzIGEgZmF2b3JpdGVgO1xyXG4gIH1cclxuICBjb25zb2xlLmxvZygnQ2hlY2tlZCA6ICcsIGZhdm9yaXRlLmNoZWNrZWQpO1xyXG5cclxuXHJcbiAgZmF2b3JpdGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZygnQ2hlY2tlZCBDbGljayA6ICcsIGZhdm9yaXRlLmNoZWNrZWQpO1xyXG4gICAgXHJcbiAgICBpZiggZmF2b3JpdGUuY2hlY2tlZCl7XHJcbiAgICAgIGZhdm9yaXRlLnNldEF0dHJpYnV0ZSgnYXJpYS1jaGVja2VkJywgJ3RydWUnKTtcclxuICAgICAgZmF2b3JpdGUuaW5uZXJIVE1MID0gYFJlbW92ZSAke3Jlc3RhdXJhbnQubmFtZX0gYXMgYSBmYXZvcml0ZWA7XHJcbiAgICAgIGZhdm9yaXRlLnRpdGxlID0gYFJlbW92ZSAke3Jlc3RhdXJhbnQubmFtZX0gYXMgYSBmYXZvcml0ZWA7IFxyXG5cclxuICAgICByZXR1cm4gREJIZWxwZXIuc2F2ZUZhdm9yaXRlKHJlc3RhdXJhbnQuaWQsICd0cnVlJyk7ICBcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICBmYXZvcml0ZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtY2hlY2tlZCcsICdmYWxzZScpO1xyXG4gICAgICBmYXZvcml0ZS5pbm5lckhUTUwgPSBgQWRkICR7cmVzdGF1cmFudC5uYW1lfSBhcyBhIGZhdm9yaXRlYDtcclxuICAgICAgZmF2b3JpdGUudGl0bGUgPSBgQWRkICR7cmVzdGF1cmFudC5uYW1lfSBhcyBhIGZhdm9yaXRlYDsgXHJcblxyXG4gICAgIHJldHVybiBEQkhlbHBlci5zYXZlRmF2b3JpdGUocmVzdGF1cmFudC5pZCwgJ2ZhbHNlJyk7XHJcbiAgICB9XHJcbiAgIH0pO1xyXG4gIGZhdl9kaXYuYXBwZW5kKGZhdm9yaXRlKTtcclxuICBmYXZfZGl2LmFwcGVuZChsYWJlbCk7XHJcbiAgaGVhZE5hbWUuYXBwZW5kKGZhdl9kaXYpO1xyXG5cclxuICBjb25zdCBuZWlnaGJvcmhvb2QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XHJcbiAgbmVpZ2hib3Job29kLmlubmVySFRNTCA9IHJlc3RhdXJhbnQubmVpZ2hib3Job29kO1xyXG4gIGRpdkluZm8uYXBwZW5kKG5laWdoYm9yaG9vZCk7XHJcblxyXG4gIGNvbnN0IGFkZHJlc3MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XHJcbiAgYWRkcmVzcy5pbm5lckhUTUwgPSByZXN0YXVyYW50LmFkZHJlc3M7XHJcbiAgZGl2SW5mby5hcHBlbmQoYWRkcmVzcyk7XHJcblxyXG4gIGNvbnN0IG1vcmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XHJcbiAgbW9yZS5pbm5lckhUTUwgPSAnVmlldyBEZXRhaWxzJztcclxuICBtb3JlLmhyZWYgPSBEQkhlbHBlci51cmxGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQpO1xyXG4gIGRpdkluZm8uYXBwZW5kKG1vcmUpXHJcblxyXG4gIHJldHVybiBsaVxyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIEFkZCBtYXJrZXJzIGZvciBjdXJyZW50IHJlc3RhdXJhbnRzIHRvIHRoZSBtYXAuXHJcbiAqL1xyXG5hZGRNYXJrZXJzVG9NYXAgPSAocmVzdGF1cmFudHMgPSBzZWxmLnJlc3RhdXJhbnRzKSA9PiB7XHJcbiAgcmVzdGF1cmFudHMuZm9yRWFjaChyZXN0YXVyYW50ID0+IHtcclxuICAgIC8vIEFkZCBtYXJrZXIgdG8gdGhlIG1hcFxyXG4gICAgY29uc3QgbWFya2VyID0gREJIZWxwZXIubWFwTWFya2VyRm9yUmVzdGF1cmFudChyZXN0YXVyYW50LCBzZWxmLm5ld01hcCk7XHJcbiAgICBtYXJrZXIub24oXCJjbGlja1wiLCBvbkNsaWNrKTtcclxuICAgIGZ1bmN0aW9uIG9uQ2xpY2soKSB7XHJcbiAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gbWFya2VyLm9wdGlvbnMudXJsO1xyXG4gICAgfVxyXG4gICAgc2VsZi5tYXJrZXJzLnB1c2gobWFya2VyKTtcclxuICB9KTtcclxuXHJcbn0gXHJcbi8qIGFkZE1hcmtlcnNUb01hcCA9IChyZXN0YXVyYW50cyA9IHNlbGYucmVzdGF1cmFudHMpID0+IHtcclxuICByZXN0YXVyYW50cy5mb3JFYWNoKHJlc3RhdXJhbnQgPT4ge1xyXG4gICAgLy8gQWRkIG1hcmtlciB0byB0aGUgbWFwXHJcbiAgICBjb25zdCBtYXJrZXIgPSBEQkhlbHBlci5tYXBNYXJrZXJGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQsIHNlbGYubWFwKTtcclxuICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKG1hcmtlciwgJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IG1hcmtlci51cmxcclxuICAgIH0pO1xyXG4gICAgc2VsZi5tYXJrZXJzLnB1c2gobWFya2VyKTtcclxuICB9KTtcclxufSAqL1xyXG5cclxuIl19
