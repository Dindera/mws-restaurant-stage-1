let restaurants,neighborhoods,cuisines;var newMap,markers=[];document.addEventListener("DOMContentLoaded",e=>{initMap(),fetchNeighborhoods(),fetchCuisines()}),fetchNeighborhoods=(()=>{DBHelper.fetchNeighborhoods((e,t)=>{e?console.error(e):(self.neighborhoods=t,fillNeighborhoodsHTML())})}),fillNeighborhoodsHTML=((e=self.neighborhoods)=>{const t=document.getElementById("neighborhoods-select");e.forEach(e=>{const a=document.createElement("option");a.innerHTML=e,a.value=e,t.append(a)})}),fetchCuisines=(()=>{DBHelper.fetchCuisines((e,t)=>{e?console.error(e):(self.cuisines=t,fillCuisinesHTML())})}),fillCuisinesHTML=((e=self.cuisines)=>{const t=document.getElementById("cuisines-select");e.forEach(e=>{const a=document.createElement("option");a.innerHTML=e,a.value=e,t.append(a)})}),initMap=(()=>{self.newMap=L.map("map",{center:[40.722216,-73.987501],zoom:12,scrollWheelZoom:!1}),L.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.jpg70?access_token={mapboxToken}",{mapboxToken:"pk.eyJ1IjoiZGluZGVyYSIsImEiOiJjamtsazl5NWIxd2E3M3Btemp4Njh6eGtrIn0.azq835pUPzRoLuJUX-7b1A",maxZoom:18,attribution:'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',id:"mapbox.streets"}).addTo(newMap),updateRestaurants()}),updateRestaurants=(()=>{const e=document.getElementById("cuisines-select"),t=document.getElementById("neighborhoods-select"),a=e.selectedIndex,n=t.selectedIndex,s=e[a].value,r=t[n].value;DBHelper.fetchRestaurantByCuisineAndNeighborhood(s,r,(e,t)=>{e?console.error(e):(resetRestaurants(t),fillRestaurantsHTML())})}),resetRestaurants=(e=>{self.restaurants=[],document.getElementById("restaurants-list").innerHTML="",self.markers&&self.markers.forEach(e=>e.remove()),self.markers=[],self.restaurants=e}),fillRestaurantsHTML=((e=self.restaurants)=>{const t=document.getElementById("restaurants-list");e.forEach(e=>{t.append(createRestaurantHTML(e))}),addMarkersToMap()}),createRestaurantHTML=(e=>{const t=document.createElement("li"),a=document.createElement("img");a.className="restaurant-img",a.src=DBHelper.imageUrlForRestaurant(e),a.srcset=DBHelper.imageSrcsetForIndex(e),a.sizes="300px",a.alt=`photograph of ${e.name} restaurant`;const n=document.createElement("div");n.classList.add("head_name"),t.append(n),n.append(a);const s=document.createElement("div");s.className="restaurant-info",t.tabIndex="0",t.append(s);const r=document.createElement("h2");r.innerHTML=e.name,s.append(r);const o=document.createElement("div");o.classList.add("fav_list"),n.append(o);const c=document.createElement("input");c.className="is_favorite",c.setAttribute("role","checkbox"),c.type="checkbox",c.name="favorite";const i=document.createElement("label");i.className="checkbox-label","true"==e.is_favorite?(console.log(e.is_favorite),c.checked=!0,c.setAttribute("aria-checked","true"),c.innerHTML=`Remove ${e.name} as a favorite`,c.title=`Remove ${e.name} as a favorite`):(console.log(e.is_favorite),c.checked=!1,c.setAttribute("aria-checked","false"),c.innerHTML=`Add ${e.name} as a favorite`,c.title=`Add ${e.name} as a favorite`),console.log("Checked : ",c.checked),c.addEventListener("click",()=>(console.log("Checked Click : ",c.checked),c.checked?(c.setAttribute("aria-checked","true"),c.innerHTML=`Remove ${e.name} as a favorite`,c.title=`Remove ${e.name} as a favorite`,DBHelper.saveFavorite(e.id,"true")):(c.setAttribute("aria-checked","false"),c.innerHTML=`Add ${e.name} as a favorite`,c.title=`Add ${e.name} as a favorite`,DBHelper.saveFavorite(e.id,"false")))),o.append(c),o.append(i),n.append(o);const l=document.createElement("p");l.innerHTML=e.neighborhood,s.append(l);const d=document.createElement("p");d.innerHTML=e.address,s.append(d);const m=document.createElement("a");return m.innerHTML="View Details",m.href=DBHelper.urlForRestaurant(e),s.append(m),t}),addMarkersToMap=((e=self.restaurants)=>{e.forEach(e=>{const t=DBHelper.mapMarkerForRestaurant(e,self.newMap);t.on("click",function(){window.location.href=t.options.url}),self.markers.push(t)})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsicmVzdGF1cmFudHMiLCJuZWlnaGJvcmhvb2RzIiwiY3Vpc2luZXMiLCJuZXdNYXAiLCJtYXJrZXJzIiwiaW5pdE1hcCIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsImZldGNoTmVpZ2hib3Job29kcyIsImZldGNoQ3Vpc2luZXMiLCJEQkhlbHBlciIsImVycm9yIiwiY29uc29sZSIsInNlbGYiLCJmaWxsTmVpZ2hib3Job29kc0hUTUwiLCJzZWxlY3QiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwibmVpZ2hib3Job29kIiwib3B0aW9uIiwiaW5uZXJIVE1MIiwiZmlsbEN1aXNpbmVzSFRNTCIsImZvckVhY2giLCJjdWlzaW5lIiwiY3JlYXRlRWxlbWVudCIsIkwiLCJtYXAiLCJjZW50ZXIiLCJ6b29tIiwic2Nyb2xsV2hlZWxab29tIiwibWFwYm94VG9rZW4iLCJtYXhab29tIiwiaWQiLCJ1cGRhdGVSZXN0YXVyYW50cyIsImNTZWxlY3QiLCJuU2VsZWN0Iiwic2VsZWN0ZWRJbmRleCIsImNJbmRleCIsIm5JbmRleCIsInZhbHVlIiwiZmlsbFJlc3RhdXJhbnRzSFRNTCIsInJlc2V0UmVzdGF1cmFudHMiLCJtYXJrZXIiLCJyZW1vdmUiLCJ1bCIsInJlc3RhdXJhbnQiLCJhcHBlbmQiLCJjcmVhdGVSZXN0YXVyYW50SFRNTCIsImFkZE1hcmtlcnNUb01hcCIsImxpIiwiaW1hZ2UiLCJjbGFzc05hbWUiLCJuYW1lIiwiaGVhZE5hbWUiLCJkaXZJbmZvIiwidGFiSW5kZXgiLCJmYXZfZGl2IiwiY2xhc3NMaXN0IiwiZmF2b3JpdGUiLCJhZGQiLCJzZXRBdHRyaWJ1dGUiLCJsYWJlbCIsImlzX2Zhdm9yaXRlIiwibG9nIiwidGl0bGUiLCJjaGVja2VkIiwic2F2ZUZhdm9yaXRlIiwiYWRkcmVzcyIsIm1vcmUiLCJocmVmIiwidXJsRm9yUmVzdGF1cmFudCIsIm1hcE1hcmtlckZvclJlc3RhdXJhbnQiLCJvbiIs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c0IsRUFBUVIsT0FBT3FCLEdBRWZYLEVBQU1ZLE9BQU9wRCxHQUNib0QsRUFBS2hELE9BQUxvQyxHQUVBRixNQUFBQSxFQUFBdEMsU0FBQVEsY0FBQSxLQUVBTixFQUFBRSxVQUFBeUIsRUFBQTNCLGFBL0ZGb0MsRUFBQVIsT0FBQTVCLEdBc0ZFLE1BQU1pRCxFQUFVbkQsU0FBU1EsY0FBYyxLQUN2QzJDLEVBQVEvQyxVQUFZeUIsRUFBV3NCLFFBQy9CYixFQUFRUixPQUFPcUIsR0FjakJuQixNQUFBQSxFQUFlaEMsU0FBSWhCLGNBQW1CQSxLQVBwQyxPQVFBQSxFQUFBQSxVQUFZc0IsZUFDVjhDLEVBQUFDLEtBQUEzRCxTQUFBNEQsaUJBQUF6QixHQUNBUyxFQUFNWixPQUFNMEIsR0FWUG5CLElBa0JSRCxnQkFYRCxFQUFBaEQsRUFBQWEsS0FBQWIsZUFZQUEsRUFBQXNCLFFBQUF1QixJQVRJLE1BQU1ILEVBQVNoQyxTQUFTNkQsdUJBQXVCMUIsRUFBWWhDLEtBQUtWLFFBQ2hFdUMsRUFBTzhCLEdBQUcsUUFDVixXQUNFQyxPQUFPQyxTQUFTTCxLQUFPM0IsRUFBT2lDLFFBQVFDLE1BRXhDL0QsS0FBS1QsUUFBUXlFLEtBQUtuQyIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsibGV0IHJlc3RhdXJhbnRzLFxyXG4gIG5laWdoYm9yaG9vZHMsXHJcbiAgY3Vpc2luZXNcclxudmFyIG5ld01hcFxyXG52YXIgbWFya2VycyA9IFtdXHJcbi8qKlxyXG4gKiBGZXRjaCBuZWlnaGJvcmhvb2RzIGFuZCBjdWlzaW5lcyBhcyBzb29uIGFzIHRoZSBwYWdlIGlzIGxvYWRlZC5cclxuICovXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoZXZlbnQpID0+IHtcclxuICBpbml0TWFwKCk7IC8vIGFkZGVkIFxyXG4gIGZldGNoTmVpZ2hib3Job29kcygpO1xyXG4gIGZldGNoQ3Vpc2luZXMoKTtcclxufSk7XHJcblxyXG4vKipcclxuICogRmV0Y2ggYWxsIG5laWdoYm9yaG9vZHMgYW5kIHNldCB0aGVpciBIVE1MLlxyXG4gKi9cclxuZmV0Y2hOZWlnaGJvcmhvb2RzID0gKCkgPT4ge1xyXG4gIERCSGVscGVyLmZldGNoTmVpZ2hib3Job29kcygoZXJyb3IsIG5laWdoYm9yaG9vZHMpID0+IHtcclxuICAgIGlmIChlcnJvcikgeyAvLyBHb3QgYW4gZXJyb3JcclxuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBzZWxmLm5laWdoYm9yaG9vZHMgPSBuZWlnaGJvcmhvb2RzO1xyXG4gICAgICBmaWxsTmVpZ2hib3Job29kc0hUTUwoKTtcclxuICAgIH1cclxuICB9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNldCBuZWlnaGJvcmhvb2RzIEhUTUwuXHJcbiAqL1xyXG5maWxsTmVpZ2hib3Job29kc0hUTUwgPSAobmVpZ2hib3Job29kcyA9IHNlbGYubmVpZ2hib3Job29kcykgPT4ge1xyXG4gIGNvbnN0IHNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZWlnaGJvcmhvb2RzLXNlbGVjdCcpO1xyXG4gIG5laWdoYm9yaG9vZHMuZm9yRWFjaChuZWlnaGJvcmhvb2QgPT4ge1xyXG4gICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XHJcbiAgICBvcHRpb24uaW5uZXJIVE1MID0gbmVpZ2hib3Job29kO1xyXG4gICAgb3B0aW9uLnZhbHVlID0gbmVpZ2hib3Job29kO1xyXG4gICAgc2VsZWN0LmFwcGVuZChvcHRpb24pO1xyXG4gIH0pO1xyXG59XHJcblxyXG4vKipcclxuICogRmV0Y2ggYWxsIGN1aXNpbmVzIGFuZCBzZXQgdGhlaXIgSFRNTC5cclxuICovXHJcbmZldGNoQ3Vpc2luZXMgPSAoKSA9PiB7XHJcbiAgREJIZWxwZXIuZmV0Y2hDdWlzaW5lcygoZXJyb3IsIGN1aXNpbmVzKSA9PiB7XHJcbiAgICBpZiAoZXJyb3IpIHsgLy8gR290IGFuIGVycm9yIVxyXG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHNlbGYuY3Vpc2luZXMgPSBjdWlzaW5lcztcclxuICAgICAgZmlsbEN1aXNpbmVzSFRNTCgpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG59XHJcblxyXG4vKipcclxuICogU2V0IGN1aXNpbmVzIEhUTUwuXHJcbiAqL1xyXG5maWxsQ3Vpc2luZXNIVE1MID0gKGN1aXNpbmVzID0gc2VsZi5jdWlzaW5lcykgPT4ge1xyXG4gIGNvbnN0IHNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdWlzaW5lcy1zZWxlY3QnKTtcclxuXHJcbiAgY3Vpc2luZXMuZm9yRWFjaChjdWlzaW5lID0+IHtcclxuICAgIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xyXG4gICAgb3B0aW9uLmlubmVySFRNTCA9IGN1aXNpbmU7XHJcbiAgICBvcHRpb24udmFsdWUgPSBjdWlzaW5lO1xyXG4gICAgc2VsZWN0LmFwcGVuZChvcHRpb24pO1xyXG4gIH0pO1xyXG59XHJcblxyXG4vKipcclxuICogSW5pdGlhbGl6ZSBsZWFmbGV0IG1hcCwgY2FsbGVkIGZyb20gSFRNTC5cclxuICovXHJcbmluaXRNYXAgPSAoKSA9PiB7XHJcbiAgc2VsZi5uZXdNYXAgPSBMLm1hcCgnbWFwJywge1xyXG4gICAgICAgIGNlbnRlcjogWzQwLjcyMjIxNiwgLTczLjk4NzUwMV0sXHJcbiAgICAgICAgem9vbTogMTIsXHJcbiAgICAgICAgc2Nyb2xsV2hlZWxab29tOiBmYWxzZVxyXG4gICAgICB9KTtcclxuICBMLnRpbGVMYXllcignaHR0cHM6Ly9hcGkudGlsZXMubWFwYm94LmNvbS92NC97aWR9L3t6fS97eH0ve3l9LmpwZzcwP2FjY2Vzc190b2tlbj17bWFwYm94VG9rZW59Jywge1xyXG4gICAgbWFwYm94VG9rZW46ICdway5leUoxSWpvaVpHbHVaR1Z5WVNJc0ltRWlPaUpqYW10c2F6bDVOV0l4ZDJFM00zQnRlbXA0TmpoNmVHdHJJbjAuYXpxODM1cFVQelJvTHVKVVgtN2IxQScsXHJcbiAgICBtYXhab29tOiAxOCxcclxuICAgIGF0dHJpYnV0aW9uOiAnTWFwIGRhdGEgJmNvcHk7IDxhIGhyZWY9XCJodHRwczovL3d3dy5vcGVuc3RyZWV0bWFwLm9yZy9cIj5PcGVuU3RyZWV0TWFwPC9hPiBjb250cmlidXRvcnMsICcgK1xyXG4gICAgICAnPGEgaHJlZj1cImh0dHBzOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9ieS1zYS8yLjAvXCI+Q0MtQlktU0E8L2E+LCAnICtcclxuICAgICAgJ0ltYWdlcnkgwqkgPGEgaHJlZj1cImh0dHBzOi8vd3d3Lm1hcGJveC5jb20vXCI+TWFwYm94PC9hPicsXHJcbiAgICBpZDogJ21hcGJveC5zdHJlZXRzJ1xyXG4gIH0pLmFkZFRvKG5ld01hcCk7XHJcblxyXG4gIHVwZGF0ZVJlc3RhdXJhbnRzKCk7XHJcbn1cclxuLyogd2luZG93LmluaXRNYXAgPSAoKSA9PiB7XHJcbiAgbGV0IGxvYyA9IHtcclxuICAgIGxhdDogNDAuNzIyMjE2LFxyXG4gICAgbG5nOiAtNzMuOTg3NTAxXHJcbiAgfTtcclxuICBzZWxmLm1hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcCcpLCB7XHJcbiAgICB6b29tOiAxMixcclxuICAgIGNlbnRlcjogbG9jLFxyXG4gICAgc2Nyb2xsd2hlZWw6IGZhbHNlXHJcbiAgfSk7XHJcbiAgdXBkYXRlUmVzdGF1cmFudHMoKTtcclxufSAqL1xyXG5cclxuLyoqXHJcbiAqIFVwZGF0ZSBwYWdlIGFuZCBtYXAgZm9yIGN1cnJlbnQgcmVzdGF1cmFudHMuXHJcbiAqL1xyXG51cGRhdGVSZXN0YXVyYW50cyA9ICgpID0+IHtcclxuICBjb25zdCBjU2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1aXNpbmVzLXNlbGVjdCcpO1xyXG4gIGNvbnN0IG5TZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmVpZ2hib3Job29kcy1zZWxlY3QnKTtcclxuXHJcbiAgY29uc3QgY0luZGV4ID0gY1NlbGVjdC5zZWxlY3RlZEluZGV4O1xyXG4gIGNvbnN0IG5JbmRleCA9IG5TZWxlY3Quc2VsZWN0ZWRJbmRleDtcclxuXHJcbiAgY29uc3QgY3Vpc2luZSA9IGNTZWxlY3RbY0luZGV4XS52YWx1ZTtcclxuICBjb25zdCBuZWlnaGJvcmhvb2QgPSBuU2VsZWN0W25JbmRleF0udmFsdWU7XHJcblxyXG4gIERCSGVscGVyLmZldGNoUmVzdGF1cmFudEJ5Q3Vpc2luZUFuZE5laWdoYm9yaG9vZChjdWlzaW5lLCBuZWlnaGJvcmhvb2QsIChlcnJvciwgcmVzdGF1cmFudHMpID0+IHtcclxuICAgIGlmIChlcnJvcikgeyAvLyBHb3QgYW4gZXJyb3IhXHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmVzZXRSZXN0YXVyYW50cyhyZXN0YXVyYW50cyk7XHJcbiAgICAgIGZpbGxSZXN0YXVyYW50c0hUTUwoKTtcclxuICAgIH1cclxuICB9KVxyXG59XHJcblxyXG4vKipcclxuICogQ2xlYXIgY3VycmVudCByZXN0YXVyYW50cywgdGhlaXIgSFRNTCBhbmQgcmVtb3ZlIHRoZWlyIG1hcCBtYXJrZXJzLlxyXG4gKi9cclxucmVzZXRSZXN0YXVyYW50cyA9IChyZXN0YXVyYW50cykgPT4ge1xyXG4gIC8vIFJlbW92ZSBhbGwgcmVzdGF1cmFudHNcclxuICBzZWxmLnJlc3RhdXJhbnRzID0gW107XHJcbiAgY29uc3QgdWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudHMtbGlzdCcpO1xyXG4gIHVsLmlubmVySFRNTCA9ICcnO1xyXG5cclxuICAvLyBSZW1vdmUgYWxsIG1hcCBtYXJrZXJzXHJcbiAgaWYgKHNlbGYubWFya2Vycykge1xyXG4gICAgc2VsZi5tYXJrZXJzLmZvckVhY2gobWFya2VyID0+IG1hcmtlci5yZW1vdmUoKSk7XHJcbiAgfVxyXG4gIHNlbGYubWFya2VycyA9IFtdO1xyXG4gIHNlbGYucmVzdGF1cmFudHMgPSByZXN0YXVyYW50cztcclxufVxyXG5cclxuLyoqXHJcbiAqIENyZWF0ZSBhbGwgcmVzdGF1cmFudHMgSFRNTCBhbmQgYWRkIHRoZW0gdG8gdGhlIHdlYnBhZ2UuXHJcbiAqL1xyXG5maWxsUmVzdGF1cmFudHNIVE1MID0gKHJlc3RhdXJhbnRzID0gc2VsZi5yZXN0YXVyYW50cykgPT4ge1xyXG4gIGNvbnN0IHVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3RhdXJhbnRzLWxpc3QnKTtcclxuICByZXN0YXVyYW50cy5mb3JFYWNoKHJlc3RhdXJhbnQgPT4ge1xyXG4gICAgdWwuYXBwZW5kKGNyZWF0ZVJlc3RhdXJhbnRIVE1MKHJlc3RhdXJhbnQpKTtcclxuICB9KTtcclxuICBhZGRNYXJrZXJzVG9NYXAoKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENyZWF0ZSByZXN0YXVyYW50IEhUTUwuXHJcbiAqL1xyXG5jcmVhdGVSZXN0YXVyYW50SFRNTCA9IChyZXN0YXVyYW50KSA9PiB7XHJcbiAgY29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xyXG5cclxuICBjb25zdCBpbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xyXG4gIGltYWdlLmNsYXNzTmFtZSA9ICdyZXN0YXVyYW50LWltZyc7XHJcbiAgaW1hZ2Uuc3JjID0gREJIZWxwZXIuaW1hZ2VVcmxGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQpO1xyXG4gIGltYWdlLnNyY3NldCA9IERCSGVscGVyLmltYWdlU3Jjc2V0Rm9ySW5kZXgocmVzdGF1cmFudCk7XHJcbiAgaW1hZ2Uuc2l6ZXMgPSBcIjMwMHB4XCI7XHJcbiAgaW1hZ2UuYWx0ID0gYHBob3RvZ3JhcGggb2YgJHtyZXN0YXVyYW50Lm5hbWV9IHJlc3RhdXJhbnRgO1xyXG4gIC8vIGxpLmFwcGVuZChpbWFnZSk7XHJcblxyXG4gIFxyXG4gIFxyXG4gIGNvbnN0IGhlYWROYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgaGVhZE5hbWUuY2xhc3NMaXN0LmFkZCgnaGVhZF9uYW1lJyk7XHJcbiAgLy8gZGl2SW5mby5hcHBlbmQoaGVhZE5hbWUpO1xyXG4gIGxpLmFwcGVuZChoZWFkTmFtZSk7XHJcbiAgaGVhZE5hbWUuYXBwZW5kKGltYWdlKTtcclxuXHJcblxyXG4gIGNvbnN0IGRpdkluZm8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICBkaXZJbmZvLmNsYXNzTmFtZSA9ICdyZXN0YXVyYW50LWluZm8nO1xyXG4gIGxpLnRhYkluZGV4ID0gXCIwXCI7XHJcbiAgbGkuYXBwZW5kKGRpdkluZm8pO1xyXG4gIFxyXG4gIGNvbnN0IG5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMicpO1xyXG4gIC8vIG5hbWUuY2xhc3NOYW1lID0gJ3Jlc3RhdXJhbnQtbmFtZSc7XHJcbiAgbmFtZS5pbm5lckhUTUwgPSByZXN0YXVyYW50Lm5hbWU7XHJcbiAgZGl2SW5mby5hcHBlbmQobmFtZSk7XHJcblxyXG4gIGNvbnN0IGZhdl9kaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICBmYXZfZGl2LmNsYXNzTGlzdC5hZGQoJ2Zhdl9saXN0Jyk7XHJcbiAgaGVhZE5hbWUuYXBwZW5kKGZhdl9kaXYpO1xyXG5cclxuICBjb25zdCBmYXZvcml0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XHJcbiAgZmF2b3JpdGUuY2xhc3NOYW1lID0gXCJpc19mYXZvcml0ZVwiO1xyXG4gIGZhdm9yaXRlLnNldEF0dHJpYnV0ZSgncm9sZScsICdjaGVja2JveCcpO1xyXG4gIC8vIGZhdm9yaXRlLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbGxlZGJ5JywgJ1Jlc3RhdXJhbnQgRmF2b3JpdGUnKTtcclxuICBmYXZvcml0ZS50eXBlID0gXCJjaGVja2JveFwiO1xyXG4gIGZhdm9yaXRlLm5hbWUgPSBcImZhdm9yaXRlXCI7XHJcbiAgY29uc3QgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xyXG4gIC8vIGxhYmVsLnNldEF0dHJpYnV0ZSgnZm9yJywgJ2lzX2Zhdm9yaXRlJyk7XHJcbiAgbGFiZWwuY2xhc3NOYW1lID0gXCJjaGVja2JveC1sYWJlbFwiO1xyXG5cclxuICBpZihyZXN0YXVyYW50LmlzX2Zhdm9yaXRlID09ICd0cnVlJyApe1xyXG4gICAgY29uc29sZS5sb2cocmVzdGF1cmFudC5pc19mYXZvcml0ZSlcclxuICAgIGZhdm9yaXRlLmNoZWNrZWQgPSB0cnVlO1xyXG4gICAgZmF2b3JpdGUuc2V0QXR0cmlidXRlKCdhcmlhLWNoZWNrZWQnLCAndHJ1ZScpO1xyXG4gICAgZmF2b3JpdGUuaW5uZXJIVE1MID0gYFJlbW92ZSAke3Jlc3RhdXJhbnQubmFtZX0gYXMgYSBmYXZvcml0ZWA7XHJcbiAgICBmYXZvcml0ZS50aXRsZSA9IGBSZW1vdmUgJHtyZXN0YXVyYW50Lm5hbWV9IGFzIGEgZmF2b3JpdGVgO1xyXG4gIH0gZWxzZXtcclxuICAgIGNvbnNvbGUubG9nKHJlc3RhdXJhbnQuaXNfZmF2b3JpdGUpXHJcbiAgICBmYXZvcml0ZS5jaGVja2VkID0gZmFsc2U7XHJcbiAgICBmYXZvcml0ZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtY2hlY2tlZCcsICdmYWxzZScpO1xyXG4gICAgZmF2b3JpdGUuaW5uZXJIVE1MID0gYEFkZCAke3Jlc3RhdXJhbnQubmFtZX0gYXMgYSBmYXZvcml0ZWA7XHJcbiAgICBmYXZvcml0ZS50aXRsZSA9IGBBZGQgJHtyZXN0YXVyYW50Lm5hbWV9IGFzIGEgZmF2b3JpdGVgO1xyXG4gIH1cclxuICBjb25zb2xlLmxvZygnQ2hlY2tlZCA6ICcsIGZhdm9yaXRlLmNoZWNrZWQpO1xyXG5cclxuXHJcbiAgZmF2b3JpdGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZygnQ2hlY2tlZCBDbGljayA6ICcsIGZhdm9yaXRlLmNoZWNrZWQpO1xyXG4gICAgXHJcbiAgICBpZiggZmF2b3JpdGUuY2hlY2tlZCl7XHJcbiAgICAgIGZhdm9yaXRlLnNldEF0dHJpYnV0ZSgnYXJpYS1jaGVja2VkJywgJ3RydWUnKTtcclxuICAgICAgZmF2b3JpdGUuaW5uZXJIVE1MID0gYFJlbW92ZSAke3Jlc3RhdXJhbnQubmFtZX0gYXMgYSBmYXZvcml0ZWA7XHJcbiAgICAgIGZhdm9yaXRlLnRpdGxlID0gYFJlbW92ZSAke3Jlc3RhdXJhbnQubmFtZX0gYXMgYSBmYXZvcml0ZWA7IFxyXG5cclxuICAgICByZXR1cm4gREJIZWxwZXIuc2F2ZUZhdm9yaXRlKHJlc3RhdXJhbnQuaWQsICd0cnVlJyk7ICBcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICBmYXZvcml0ZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtY2hlY2tlZCcsICdmYWxzZScpO1xyXG4gICAgICBmYXZvcml0ZS5pbm5lckhUTUwgPSBgQWRkICR7cmVzdGF1cmFudC5uYW1lfSBhcyBhIGZhdm9yaXRlYDtcclxuICAgICAgZmF2b3JpdGUudGl0bGUgPSBgQWRkICR7cmVzdGF1cmFudC5uYW1lfSBhcyBhIGZhdm9yaXRlYDsgXHJcblxyXG4gICAgIHJldHVybiBEQkhlbHBlci5zYXZlRmF2b3JpdGUocmVzdGF1cmFudC5pZCwgJ2ZhbHNlJyk7XHJcbiAgICB9XHJcbiAgIH0pO1xyXG4gIGZhdl9kaXYuYXBwZW5kKGZhdm9yaXRlKTtcclxuICBmYXZfZGl2LmFwcGVuZChsYWJlbCk7XHJcbiAgaGVhZE5hbWUuYXBwZW5kKGZhdl9kaXYpO1xyXG5cclxuICBjb25zdCBuZWlnaGJvcmhvb2QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XHJcbiAgbmVpZ2hib3Job29kLmlubmVySFRNTCA9IHJlc3RhdXJhbnQubmVpZ2hib3Job29kO1xyXG4gIGRpdkluZm8uYXBwZW5kKG5laWdoYm9yaG9vZCk7XHJcblxyXG4gIGNvbnN0IGFkZHJlc3MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XHJcbiAgYWRkcmVzcy5pbm5lckhUTUwgPSByZXN0YXVyYW50LmFkZHJlc3M7XHJcbiAgZGl2SW5mby5hcHBlbmQoYWRkcmVzcyk7XHJcblxyXG4gIGNvbnN0IG1vcmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XHJcbiAgbW9yZS5pbm5lckhUTUwgPSAnVmlldyBEZXRhaWxzJztcclxuICBtb3JlLmhyZWYgPSBEQkhlbHBlci51cmxGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQpO1xyXG4gIGRpdkluZm8uYXBwZW5kKG1vcmUpXHJcblxyXG4gIHJldHVybiBsaVxyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIEFkZCBtYXJrZXJzIGZvciBjdXJyZW50IHJlc3RhdXJhbnRzIHRvIHRoZSBtYXAuXHJcbiAqL1xyXG5hZGRNYXJrZXJzVG9NYXAgPSAocmVzdGF1cmFudHMgPSBzZWxmLnJlc3RhdXJhbnRzKSA9PiB7XHJcbiAgcmVzdGF1cmFudHMuZm9yRWFjaChyZXN0YXVyYW50ID0+IHtcclxuICAgIC8vIEFkZCBtYXJrZXIgdG8gdGhlIG1hcFxyXG4gICAgY29uc3QgbWFya2VyID0gREJIZWxwZXIubWFwTWFya2VyRm9yUmVzdGF1cmFudChyZXN0YXVyYW50LCBzZWxmLm5ld01hcCk7XHJcbiAgICBtYXJrZXIub24oXCJjbGlja1wiLCBvbkNsaWNrKTtcclxuICAgIGZ1bmN0aW9uIG9uQ2xpY2soKSB7XHJcbiAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gbWFya2VyLm9wdGlvbnMudXJsO1xyXG4gICAgfVxyXG4gICAgc2VsZi5tYXJrZXJzLnB1c2gobWFya2VyKTtcclxuICB9KTtcclxuXHJcbn0gXHJcbi8qIGFkZE1hcmtlcnNUb01hcCA9IChyZXN0YXVyYW50cyA9IHNlbGYucmVzdGF1cmFudHMpID0+IHtcclxuICByZXN0YXVyYW50cy5mb3JFYWNoKHJlc3RhdXJhbnQgPT4ge1xyXG4gICAgLy8gQWRkIG1hcmtlciB0byB0aGUgbWFwXHJcbiAgICBjb25zdCBtYXJrZXIgPSBEQkhlbHBlci5tYXBNYXJrZXJGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQsIHNlbGYubWFwKTtcclxuICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKG1hcmtlciwgJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IG1hcmtlci51cmxcclxuICAgIH0pO1xyXG4gICAgc2VsZi5tYXJrZXJzLnB1c2gobWFya2VyKTtcclxuICB9KTtcclxufSAqL1xyXG5cclxuIl19
